from __future__ import absolute_import, division, print_function, unicode_literals

from enums.colors import Pair
from level_template import LevelTemplate
from creature.template import CreatureTemplate
from generic_structures import List2D
from game_data.levels.shared_assets import finalize_creatures, finalize_tiles
from creature.creature import Creature
from game_data.tiles import PyrlTile


def get_template(world):

    chars = List2D(
        '################################################################################################'
        '#######################..##################.#.#.#######.....#################################.##'
        '######...##############.#.################.#.#.#.#####.####.###......#######################.@.#'
        '######.##..############.##..#############.######.#..###.###.###.####.########################.##'
        '#######.###...##.######.####.######.....##.#####.#.#.##.###.....###..###.#######################'
        '########.######...#####.#####.#####.###.###.####...##.##.##########.###.#.######################'
        '###.#####.####..#######.######.####...#.###.##########.#.##########.##.##.######################'
        '###.######.###.########.######.######.#.###.########...#.##########....##.######################'
        '###.#######.##.########.######.######.#.###.########.###.################.######################'
        '###..........##.#######.######.#####.##.....########.###.################.######################'
        '###.#######..###.######.##...#.####.################.....########.........######################'
        '###.######...####.#####.##.#...###.##############################.##############################'
        '###.#.###...######.####.##.######.###############################.###...########################'
        '####.#.##..########.###.###.####.################################.##.##........#################'
        '###.#.##.###########.##.####.##.#################################...##########.#################'
        '####.####.###########.#.#####..###############################################.#################'
        '##########.#########.##.######################################################...###############'
        '###########.#######.###.########################################################.###############'
        '############.#####.####........................................................##.##############'
        '#############.###.####.########################################################..>##############'
        '##############.#.##...##########################################################################'
        '###############.###.#.##########################################################################'
        '###############.###...##############################.....................#######################'
        '###############P...###...................................................#######################'
        '#######################################..................................#######################'
        '################################################################################################',

    len('------------------------------------------------------------------------------------------------')
    )

    tile_dict = {
        'P': PyrlTile.Stairs_Up,
        '@': PyrlTile.Floor,
    }

    tiles = finalize_tiles(chars, tile_dict)

    creature_dict = {
        '@': Creature(CreatureTemplate("The Crone", ('@', Pair.Purple))),
        'P': world.player,
    }

    creatures = finalize_creatures(creature_dict, chars)

    return LevelTemplate(
        danger_level=1,
        dimensions=tiles.get_dimensions(),
        tiles=tiles,
        static_creatures=creatures,
        creature_spawning=False,
    )
